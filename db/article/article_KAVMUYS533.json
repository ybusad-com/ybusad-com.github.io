{"code":0,"msg":"ok","data":{"article":{"authorCode":"admin","authorName":"孙天骁","classify":"技术类","content":"<p style=\"text-indent: 2em;\">一直在用Chrome的衍生版本百分浏览器，今天发现首页的音乐无法正常播放了。我之前在代码里有写，如果启动播放之后发现播放没有开始，则认为出错了，会隐藏音乐播放器。</p><p style=\"text-indent: 2em;\">然后我在DevTools的提示里找到了对此的解释。Chrome对自动播放策略进行了调整。只有用户与页面产生交互等情况下，才会允许自动播放。另外，静音自动播放也是可以的。详细说明如下：</p><p style=\"text-indent: 2em;\"><a href=\"https://developers.google.com/web/updates/2017/09/autoplay-policy-changes\">https://developers.google.com/web/updates/2017/09/autoplay-policy-changes</a>&nbsp;（需要翻墙）</p><p style=\"text-indent: 2em;\">在调用音视频的play函数时，现在会返回一个Promise对象。对这个Promise对象加监听就可以知道是否播放成功了。</p><p style=\"text-indent: 2em;\"><img src=\"/article/1526734817.png\" width=\"490\"/></p><p style=\"text-indent: 2em;\">所以据此我小改了一下首页的代码，让它在遇到这种情况时，不认为是出错以至于隐藏音乐播放器。这样用户可以手动打开音乐播放器。</p><p style=\"text-indent: 2em;\">在今年下半年上线的革命版骁之屋里，我会对音乐播放探索更成熟的设计。</p>","createTime":"2018-05-19 21:04:00","customCoverKey":"","id":219,"isGood":false,"isTop":false,"publicState":0,"replyCount":0,"state":0,"tags":["网站开发"],"title":"Chrome 66已经禁止不受控制的音视频自动播放","urlCode":"KAVMUYS533","viewCount":396,"viewGroup":-1,"authPassed":true},"author":{"exists":true,"name":"孙天骁","code":"admin","alias":"stx","description":"一个内心丰富的人","homepageUrl":"/u/stx","group":5,"groupName":"站长","isLocked":false,"gender":1,"avatarUrl":"/s/user/FufL-vSFO5eM1we1mxdfYHKH9tfK.jpg","realName":"孙天骁","refBaike":"","isManager":true,"isMe":true,"isLover":false,"introduction":"","joinTime":"2015-02-11 21:45:00"}}}