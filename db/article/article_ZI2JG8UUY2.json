{"code":0,"msg":"ok","data":{"article":{"authorCode":"admin","authorName":"孙天骁","classify":"技术类","content":"<p style=\"text-indent: 2em;\">今天我要讲一讲PHP中数组和字符串的一些基本知识。<br/></p><p style=\"text-indent: 2em;\"><strong>一.数组</strong></p><p style=\"text-indent: 2em;\">PHP中，数组是万能结构，承担着几乎所有数据的组织工作。</p><p style=\"text-indent: 2em;\">PHP创建数组很简单。</p><p style=\"text-indent: 2em;\">第一种方式，利用array()结构，在PHP5.4+，还可以简写成方括号[]</p><pre class=\"brush:php;toolbar:false\">$a1&nbsp;=&nbsp;array(1,&nbsp;2,&nbsp;3);\n$a2&nbsp;=&nbsp;[1,&nbsp;2,&nbsp;3];&nbsp;//php5.4+可用\n$a3&nbsp;=&nbsp;[&quot;hello&quot;,&nbsp;10,&nbsp;3.14];&nbsp;//可以混合各种数据类型\n$a4&nbsp;=&nbsp;[];&nbsp;//一个空数组</pre><p style=\"text-indent: 2em;\">实际上，PHP数组中的元素是以键值对的方式存在的，未显示指定键名时，默认为0,1,2,3...。需要显示指定时：<br/></p><pre class=\"brush:php;toolbar:false\">$a5&nbsp;=&nbsp;[1=&gt;&quot;hello&quot;,&nbsp;&quot;say&quot;=&gt;&quot;world&quot;];</pre><p style=\"text-indent: 2em;\">键名只允许字符串和整数。不可以有重复的键名，如果存在，会只保留最后一个键值对。<br/></p><p style=\"text-indent: 2em;\">你也可以仅指定部分键名，未指定的PHP会自动分配键名：</p><pre class=\"brush:php;toolbar:false\">$a6&nbsp;=&nbsp;[1,&nbsp;2=&gt;2,&nbsp;4=&gt;5,&nbsp;3.14,&nbsp;&quot;hello&quot;=&gt;&quot;world&quot;];</pre><p style=\"text-indent: 2em;\">用print_r函数输出数组的结构信息：</p><pre class=\"brush:php;toolbar:false\">print_r($a6);</pre><p style=\"text-indent: 2em;\">输出结果为：</p><pre class=\"brush:plain;toolbar:false\">Array\n(\n&nbsp;&nbsp;&nbsp;&nbsp;[0]&nbsp;=&gt;&nbsp;1\n&nbsp;&nbsp;&nbsp;&nbsp;[2]&nbsp;=&gt;&nbsp;2\n&nbsp;&nbsp;&nbsp;&nbsp;[4]&nbsp;=&gt;&nbsp;5\n&nbsp;&nbsp;&nbsp;&nbsp;[5]&nbsp;=&gt;&nbsp;3.14\n&nbsp;&nbsp;&nbsp;&nbsp;[hello]&nbsp;=&gt;&nbsp;world\n)</pre><p style=\"text-indent: 2em;\">为了方便起见，在最后一个键值对后面可以保留逗号：<br/></p><pre class=\"brush:php;toolbar:false\">$stu1&nbsp;=&nbsp;array(\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;姓名&quot;&nbsp;=&gt;&nbsp;&quot;小明&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;性别&quot;&nbsp;=&gt;&nbsp;&quot;男&quot;,\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;年龄&quot;&nbsp;=&gt;&nbsp;18,&nbsp;//保留最后的逗号方便编辑，是合法的\n);</pre><p style=\"text-indent: 2em;\">如何定义多维数组？<br/></p><p style=\"text-indent: 2em;\">多维数组实际上可以理解成数组的某一个元素又是一个数组类型，比如：</p><pre class=\"brush:php;toolbar:false\">$a7&nbsp;=&nbsp;[\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;male&quot;&nbsp;=&gt;&nbsp;[&#39;小明&#39;,&#39;小张&#39;,],\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;female&quot;&nbsp;=&gt;&nbsp;[&#39;小王&#39;],\n&nbsp;&nbsp;&nbsp;&nbsp;&quot;other&quot;&nbsp;=&gt;&nbsp;&quot;none&quot;,\n];</pre><p style=\"text-indent: 2em;\">print_r输出结果为：<br/></p><pre class=\"brush:plain;toolbar:false\">Array\n(\n&nbsp;&nbsp;&nbsp;&nbsp;[male]&nbsp;=&gt;&nbsp;Array\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0]&nbsp;=&gt;&nbsp;小明\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[1]&nbsp;=&gt;&nbsp;小张\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n\n&nbsp;&nbsp;&nbsp;&nbsp;[female]&nbsp;=&gt;&nbsp;Array\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[0]&nbsp;=&gt;&nbsp;小王\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)\n\n&nbsp;&nbsp;&nbsp;&nbsp;[other]&nbsp;=&gt;&nbsp;none\n)</pre><p style=\"text-indent: 2em;\">接下来讲一些常用的数组操作：<br/></p><p style=\"text-indent: 2em;\">(一)如何动态给数组添加元素？</p><pre class=\"brush:php;toolbar:false\">$a&nbsp;=&nbsp;[1,2,3];\n$a[]&nbsp;=&nbsp;4;&nbsp;//在数组最后添加一个元素4\n$a[8]&nbsp;=&nbsp;9;&nbsp;//在数组最后添加一个元素9，并强制指定键名为8\n$a[2]&nbsp;=&nbsp;10;&nbsp;//数组里已经存在键名为2的元素，那么覆盖该元素为10\n$a[10][]&nbsp;=&nbsp;2;&nbsp;//指定a[10]为二维数组，第一个元素为2\n$a[1]&nbsp;=&nbsp;[2,3,4=&gt;5];&nbsp;//把a[1]重新指定为一个数组</pre><p style=\"text-indent: 2em;\">具体多试，数组的操作是很灵活的，php没那么容易报错，很多写法都是可以的。<br/></p><p style=\"text-indent: 2em;\">如果要取出数据，用键名取出是可以的。取不存在的值时会返回null，直接输出就是空字符串，所以不用担心出错哈。<br/></p><p style=\"text-indent: 2em;\">接下来讲一下遍历数组的foreach结构。<br/></p><pre class=\"brush:php;toolbar:false\">$a&nbsp;=&nbsp;[1,&nbsp;2,&nbsp;3];\nforeach($a&nbsp;as&nbsp;$value){\n&nbsp;&nbsp;&nbsp;&nbsp;//$value就是$a的每个值\n}</pre><p style=\"text-indent: 2em;\">如果需要同时取得键名</p><pre class=\"brush:php;toolbar:false\">$a&nbsp;=&nbsp;[0=&gt;1,&nbsp;1=&gt;2,&nbsp;&quot;a&quot;=&gt;3];\nforeach($a&nbsp;as&nbsp;$key=&gt;$value){\n&nbsp;&nbsp;&nbsp;//在这里就可以放$key和对应的$value的各种操作了。当然$key和$value的变量名是随便取的。\n}\n//值得注意的是，遍历完成后，变量$key和$value是不会被自动销毁的，如果怕影响到下一步操作，可以用unset()函数手动销毁变量\nunset($key);unset($value);</pre><p style=\"text-indent: 2em;\">还有一种高级写法，按引用取得键值</p><pre class=\"brush:php;toolbar:false\">foreach($arr&nbsp;as&nbsp;&amp;$v){\n&nbsp;&nbsp;&nbsp;&nbsp;//在这里修改$v的时候会动到数组$arr里的对应值\n}</pre><p style=\"text-indent: 2em;\">我再写一个遍历多维数组的函数吧。。</p><pre class=\"brush:php;toolbar:false\">function&nbsp;scanarray($arr){\n&nbsp;&nbsp;&nbsp;&nbsp;foreach($arr&nbsp;as&nbsp;$v){\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(is_array($v)){\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scanarray($v);\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;$v.&quot;\\n&quot;;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;&nbsp;&nbsp;}\n&nbsp;&nbsp;}</pre><p style=\"text-indent: 2em;\">获得数组中元素的个数请用count函数，默认不进行递归计数，如果需要递归计数，请指定count的第二个参数为常量<code>COUNT_RECURSIVE或1。</code></p><p style=\"text-indent: 2em;\"><code>PHP还提供极其丰富的数组操作函数，具体因为篇幅限制暂且不提，请自行查阅手册。<br/></code></p><p style=\"text-indent: 2em;\"><strong>二.字符串</strong></p><p style=\"text-indent: 2em;\">上篇文章我有提过字符串的一些知识，包括单引号和双引号的区别。</p><p style=\"text-indent: 2em;\">双引号字符串内可以直接写单引号而不用转义，单引号字符串中可以直接写双引号而不用转义。</p><p style=\"text-indent: 2em;\">双引号字符串中可以囊括变量，php可以解析。</p><p style=\"text-indent: 2em;\">如：</p><pre class=\"brush:php;toolbar:false\">$name&nbsp;=&nbsp;&quot;stx&quot;;\necho&nbsp;&quot;My&nbsp;name&nbsp;is&nbsp;$name!&quot;;//输出My&nbsp;name&nbsp;is&nbsp;stx!</pre><p style=\"text-indent: 2em;\">可以将变量名用花括号圈起来，使php能更好的识别变量名。尤其是试图在字符串里嵌入数组元素时必须这样做：</p><pre class=\"brush:php;toolbar:false\">$name&nbsp;=&nbsp;[&#39;stx&#39;=&gt;&#39;孙天骁&#39;,&#39;zjl&#39;=&gt;&#39;周杰伦&#39;];\necho&nbsp;&quot;有个人的名字叫做{$name[&#39;zjl&#39;]}。&quot;;&nbsp;//输出&nbsp;有个人的名字叫做周杰伦</pre><p style=\"text-indent: 2em;\">如果要输出美元符号本身而又担心php可能理解错美元符号的意思，可以在$前面加上反斜杠“\\”。<br/></p><p style=\"text-indent: 2em;\">统计字符串中字符个数请用strlen函数。但是这个函数是统计字符串所占的字节数，所以不适合中文！</p><p style=\"text-indent: 2em;\">strlen(&quot;你好abc&quot;);的结果在utf-8的编码下结果为9（一个汉字占3个字节）。在gb2312编码下的结果为7（一个汉字占两个字节）。</p><p style=\"text-indent: 2em;\">可以用iconv函数转换字符串的编码。具体请查阅php手册。</p><p style=\"text-indent: 2em;\">要统计多字节字符的个数该怎么办呢？请用mb_strlen函数，并将第二个参数指定为当前编码（和文件编码一致）</p><pre class=\"brush:php;toolbar:false\">echo&nbsp;mb_strlen(&quot;hello孙天骁&quot;,&#39;utf-8&#39;);&nbsp;//输出8</pre><p style=\"text-indent: 2em;\">php字符串的很多函数都提供了mb_前缀的支持多字节字符处理函数。如果你觉得当前执行的字符串函数需要考虑单字节字符和多字节字符的区别，请加上mb_前缀并指定编码。<br/></p><p style=\"text-indent: 2em;\">比如strpos/stripos函数，提供了从一个字符串查找另一个字符串位置的功能，他俩的区别是前者区分大小写而后者不。</p><p style=\"text-indent: 2em;\">执行字符串的替换操作需要用到str_replace/<span style=\"text-indent: 32px;\">str_ireplace</span>函数，这个没有mb_形式。如果需要使用正则表达式，请使用<span class=\"refname\">preg_replace函数。</span></p><p style=\"text-indent: 2em;\">php提供极其丰富的字符串处理函数，篇幅限制，就不具体说了，请自行翻阅php手册或w3school（<a href=\"http://www.w3school.com.cn/php/php_ref_string.asp\" target=\"_blank\">http://www.w3school.com.cn/php/php_ref_string.asp</a><span style=\"text-indent: 2em;\">）</span></p><p style=\"text-indent: 2em;\"><br/></p><p style=\"text-indent: 2em;\">以上。献给小宇等等。</p>","createTime":"2015-10-23 21:05:15","customCoverKey":"","id":92,"isGood":true,"isTop":false,"publicState":0,"replyCount":0,"state":0,"tags":["php","教程"],"title":"PHP入门（2）PHP基本语法之数组与字符串","urlCode":"ZI2JG8UUY2","viewCount":1026,"viewGroup":-1,"authPassed":true},"author":{"exists":true,"name":"孙天骁","code":"admin","alias":"stx","description":"一个内心丰富的人","homepageUrl":"/u/stx","group":5,"groupName":"站长","isLocked":false,"gender":1,"avatarUrl":"/s/user/FufL-vSFO5eM1we1mxdfYHKH9tfK.jpg","realName":"孙天骁","refBaike":"","isManager":true,"isMe":true,"isLover":false,"introduction":"","joinTime":"2015-02-11 21:45:00"}}}