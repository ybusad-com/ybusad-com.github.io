{"code":0,"msg":"ok","data":{"article":{"authorCode":"admin","authorName":"孙天骁","classify":"技术类","content":"<p>\t\t新版随记系统有一个重要革新，就是要增加多时区的支持。即当发送随记的地区不使用北京时间时，随记系统要能够识别和显示。</p><p>\t\t首先我们应该了解什么是时区，什么是UTC，什么是GMT。</p><p>\t\t时区的概念很简单，学过初中地理的人都知道，地球是圆的，太阳升起的时间在不同的地区都不一样，那么为了不同地区之间能够准确协调时间，那么就有了时区的概念。大致是将地球按经度分成24个部分。以英国格林尼治时间为一天的中点，就是GMT。中国标准时间比英国格林尼治时间快8小时，也就是GMT+8。</p><p>\t\t而UTC则是协调世界时，是由原子钟提供的。在时刻上尽量接近GMT的表示方式。但因为地球的自转速度并不均匀，UTC会把地球自转变慢多出来的时间考虑进去。即增加闰秒。在计算机的世界里，时间也是跟UTC对齐的。中国的标准时间是UTC+8。GMT则可以认为是UTC+0。</p><p>\t\t在JavaScript中获取当前时区照UTC+0的偏移很简单。</p><pre>const timezoneOffset = -new Date().getTimezoneOffset() / 60;\n</pre><p>\t\tDate.prototype.getTimezoneOffset() 就是JavaScript Date对象提供的获取时区的方法。它返回一个数字，单位是分钟。如果本地时区晚于协调世界时，那么返回正值，否则返回负值。所以在北京，这个函数返回-480。经过以上处理，就可以得到8。</p><p>\t\t此外，浏览器JavaScript还提供了Intl命名空间用于处理国际化的一些事情。其中就有Intl.DateTimeFormat构造函数用来构造跟语言/时区有关的格式化工具。其中 Intl.DateTimeFormat.prototype.resolvedOptions() 可以返回实例当前使用的语言和时区。如果new Intl.DateTimeFormat()构造函数不传入指定的语言时区，则使用的就是浏览器当前使用的语言和时区。这样如果执行</p><pre>new Intl.DateTimeFormat().resolvedOptions().timeZone\n</pre><p>\t\t就会以地区标准时字符串的方式返回当前时区。例如返回“Asia/Shanghai”</p><p>\t\t后面我会更新一个，Java如何获取当前时区的文章。</p>","createTime":"2021-05-04 00:48:21","customCoverKey":"","id":289,"isGood":false,"isTop":false,"publicState":0,"replyCount":0,"state":0,"tags":["JavaScript","前端"],"title":"JavaScript 获取当前时区","urlCode":"js-timezone","viewCount":985,"viewGroup":-1,"authPassed":true},"author":{"exists":true,"name":"孙天骁","code":"admin","alias":"stx","description":"一个内心丰富的人","homepageUrl":"/u/stx","group":5,"groupName":"站长","isLocked":false,"gender":1,"avatarUrl":"/s/user/FufL-vSFO5eM1we1mxdfYHKH9tfK.jpg","realName":"孙天骁","refBaike":"","isManager":true,"isMe":true,"isLover":false,"introduction":"","joinTime":"2015-02-11 21:45:00"}}}