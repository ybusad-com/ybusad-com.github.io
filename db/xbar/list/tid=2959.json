{"barInfo":{"barName":"骁","description":"开放自由的类贴吧式留言板","isMainBar":true,"isPublic":true},"list":[{"author":"孙天骁","authorCode":"admin","content":"<p>把别人写的文章用自己的理解复述一遍。</p> ","floor":1,"pid":0,"postTime":"2019-04-26 10:52:32","replyCount":0,"signKey":"","source":"","sourceUrl":"","tid":2959},{"author":"孙天骁","authorCode":"admin","content":"<p>为什么要跨域？因为有同源策略限制。</p><p>同源策略限制会限制（域名不同、子域不同、端口不同、协议不同）等场景。</p> ","floor":2,"pid":8617,"postTime":"2019-04-26 10:53:56","replyCount":0,"signKey":"","source":"","tid":2959},{"author":"孙天骁","authorCode":"admin","content":"<p>1.通过jsonp跨域。对面返回的是一个json时，通过jsonp包装即可实现数据的传输。</p> ","floor":3,"pid":8618,"postTime":"2019-04-26 10:54:58","replyCount":0,"signKey":"","source":"","tid":2959},{"author":"孙天骁","authorCode":"admin","content":"<p>2.后端中转跨域。比如建一个node.js后端做中转。把其他域的数据抓过来。</p> ","floor":4,"pid":8619,"postTime":"2019-04-26 10:55:45","replyCount":0,"signKey":"","source":"","tid":2959},{"author":"孙天骁","authorCode":"admin","content":"<p>3.document.domain跨域：将document.domain设置为共同的父域名，就可以实现网页和其中的iframe之间的跨域了。</p><p>访问父窗口通过window.parent，访问框架内部使用contentWindow。</p> ","floor":5,"pid":8620,"postTime":"2019-04-26 10:57:57","replyCount":0,"signKey":"","source":"","tid":2959},{"author":"孙天骁","authorCode":"admin","content":"<p>4.通过监测hash的变化跨域。</p><p>也用于iframe的通信。</p> ","floor":6,"pid":8621,"postTime":"2019-04-26 10:59:37","replyCount":0,"signKey":"","source":"","tid":2959},{"author":"孙天骁","authorCode":"admin","content":"<p>5.使用window.name存储数据</p><p>同一窗口随后加载的网页可以访问到window.name的数据</p> ","floor":7,"pid":8622,"postTime":"2019-04-26 11:01:58","replyCount":0,"signKey":"","source":"","tid":2959},{"author":"孙天骁","authorCode":"admin","content":"<p>6.使用HTML5：postMessage跨域</p><p>postMessage函数的调用不受到同源策略的影响，监听window的message就可以拿到数据了。</p> ","floor":8,"pid":8623,"postTime":"2019-04-26 11:05:12","replyCount":0,"signKey":"","source":"","tid":2959},{"author":"孙天骁","authorCode":"admin","content":"<p>7.CORS跨域，老朋友</p><p>在服务端设置<span style=\"color: rgb(51, 51, 51);\">Access-Control-Allow-Origin后填域名和协议。</span></p><p>如果需要带Cookie，前端需要设置 xhr.withCredentials = true，后端需要加上Access-Control-Allow-Credentials: true。</p><p>还需要设置Access-Control-Allow-Headers，一般可填Content-Type,X-Requested-With</p> ","floor":9,"pid":8624,"postTime":"2019-04-26 11:09:01","replyCount":0,"signKey":"","source":"","tid":2959},{"author":"孙天骁","authorCode":"admin","content":"<p>8.通过nginx做代理跨域</p><p>对一个域名的请求可以通过nginx映射到另一个域名上。</p> ","floor":10,"pid":8625,"postTime":"2019-04-26 11:09:32","replyCount":0,"signKey":"","source":"","tid":2959},{"author":"孙天骁","authorCode":"admin","content":"<p>参考链接：<a href=\"https://segmentfault.com/a/1190000011145364\" target=\"_blank\">https://segmentfault.com/a/1190000011145364</a></p> ","floor":11,"pid":8626,"postTime":"2019-04-26 11:09:40","replyCount":0,"signKey":"","source":"","tid":2959}],"pageInfo":{"total":11,"pageSize":30,"current":1},"threadInfo":{"author":"孙天骁","authorCode":"admin","classifyName":"闲谈","goodClassifyName":"","id":2959,"isGood":true,"isPicture":false,"isRepost":false,"postTime":"2019-04-26 10:52:32","replyCount":10,"title":"前端跨域解决方案总结","topState":0},"tid":2959,"total":11,"totalPages":1,"viewHost":false,"users":{"admin":{"exists":true,"name":"孙天骁","code":"admin","alias":"stx","description":"一个内心丰富的人","homepageUrl":"/u/stx","group":5,"groupName":"站长","isLocked":false,"gender":1,"avatarUrl":"/s/user/FufL-vSFO5eM1we1mxdfYHKH9tfK.jpg","realName":"孙天骁","refBaike":"","isManager":true,"isMe":true,"isLover":false,"introduction":"","joinTime":"2015-02-11 21:45:00"}},"needVerify":true}