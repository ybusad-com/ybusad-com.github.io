{"code":0,"msg":"ok","data":{"barInfo":{"barName":"骁","description":"开放自由的类贴吧式留言板","isMainBar":true,"isPublic":true},"list":[{"author":"孙天骁","authorCode":"admin","content":"<p><img src=\"/xbar/aad7a86e7967f4ac7f.jpg\"></p> ","floor":1,"pid":0,"postTime":"2021-04-13 23:48:54","replyCount":0,"signKey":"","source":"","sourceUrl":"","tid":3137},{"author":"孙天骁","authorCode":"admin","content":"<pre spellcheck=\"false\">&lt;template&gt;\n\n\n&nbsp; &lt;!-- 用于顶导 收藏夹/历史 卡片 --&gt;\n&nbsp; &lt;!-- business: live/pgc/archive/article/audio --&gt;\n\n\n&nbsp; &lt;a class=\"header-video-card\"\n&nbsp; &nbsp; &nbsp;:href=\"linkMap()\"\n&nbsp; &nbsp; &nbsp;v-van-report:nav-videocard.click=\"`${card.business}-${card.id}`\"\n&nbsp; &nbsp; &nbsp;target=\"_blank\"&gt;\n&nbsp; &nbsp; &lt;div :class=\"['video-preview', {'multiple-preview': from === 'FAVORITE'}]\"&gt;\n&nbsp; &nbsp; &nbsp; &lt;!-- 直播 角标 --&gt;\n&nbsp; &nbsp; &nbsp; &lt;div v-if=\"card.business === 'live'\"\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;class=\"badge\"\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :class=\"{ 'badge-red': card.live_status === 1, 'badge-gray': card.live_status === 0 }\"&gt;\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {{ card.live_status === 1 ? $HeadLang['56'] : $HeadLang['57'] }}&lt;/div&gt;\n&nbsp; &nbsp; &nbsp; &lt;!-- 专栏 角标 --&gt;\n&nbsp; &nbsp; &nbsp; &lt;div v-if=\"card.business === 'article' &amp;&amp; from === 'FAVORITE'\" class=\"badge badge-red\"&gt;{{$HeadLang['15']}}&lt;/div&gt;\n\n\n&nbsp; &nbsp; &nbsp; &lt;!-- 预览图 --&gt;\n&nbsp; &nbsp; &nbsp; &lt;NavUserVideoCardImg\n&nbsp; &nbsp; &nbsp; &nbsp; :business=\"card.business\"\n&nbsp; &nbsp; &nbsp; &nbsp; :cover=\"card.cover\"\n&nbsp; &nbsp; &nbsp; &nbsp; :state=\"card.state\"\n&nbsp; &nbsp; &nbsp; &nbsp; :page=\"card.page\"\n&nbsp; &nbsp; &nbsp; &nbsp; :duration=\"card.duration\"\n&nbsp; &nbsp; &nbsp; &nbsp; :from=\"from\"\n&nbsp; &nbsp; &nbsp; &nbsp; :isLater=\"card.isLater\"\n&nbsp; &nbsp; &nbsp; &nbsp; :progress=\"card.progress\" /&gt;\n\n\n&nbsp; &nbsp; &nbsp; &lt;!-- 历史：观看进度 --&gt;\n&nbsp; &nbsp; &nbsp; &lt;div v-if=\"from === 'HISTORY' &amp;&amp; (card.business === 'archive' || card.business === 'pgc')\" &gt;\n&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class=\"bar\"&gt;&lt;/div&gt;\n&nbsp; &nbsp; &nbsp; &nbsp; &lt;div v-if=\"card.progress === -1\" class=\"progress\" style=\"width: 100%\"&gt;&lt;/div&gt;\n&nbsp; &nbsp; &nbsp; &nbsp; &lt;div v-else class=\"progress\" :style=\"{ width: `${(card.progress/card.duration) * 100}%` }\"&gt;&lt;/div&gt;\n&nbsp; &nbsp; &nbsp; &lt;/div&gt;\n\n\n&nbsp; &nbsp; &lt;/div&gt;\n\n\n&nbsp; &nbsp; &lt;div class=\"video-info\"&gt;\n&nbsp; &nbsp; &nbsp; &lt;!-- 标题 --&gt;\n&nbsp; &nbsp; &nbsp; &lt;div v-if=\"from === 'HISTORY'\" :title=\"card.title\"\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :class=\"{ 'line-2': card.business !== 'pgc', 'line-1': card.business === 'pgc' }\"&gt;\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;{{ card.title }}&lt;/div&gt;\n&nbsp; &nbsp; &nbsp; &lt;div v-else class=\"line-2\" :title=\"card.title\"&gt;{{ card.title }}&lt;/div&gt;\n&nbsp; &nbsp; &nbsp; &lt;!-- pgc卡 描述文字：例如 “第一话：穿越时空复活的男人” --&gt;\n&nbsp; &nbsp; &nbsp; &lt;div v-if=\"card.business === 'pgc'\" class=\"desc\" :title=\"card.show_title\"&gt;\n&nbsp; &nbsp; &nbsp; &nbsp; {{ card.show_title }}\n&nbsp; &nbsp; &nbsp; &lt;/div&gt;\n\n\n&nbsp; &nbsp; &nbsp; &lt;div class=\"info\"&gt;\n&nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- 历史：观看时间 --&gt;\n&nbsp; &nbsp; &nbsp; &nbsp; &lt;div v-if=\"from === 'HISTORY' &amp;&amp; card.view_at\" class=\"info--history\"&gt;\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;i class=\"history-device bilifont\" :class=\"historyDevice\"&gt;&lt;/i&gt;\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span class=\"date\" v-if=\"dateText !== $HeadLang['58']\"&gt;{{ dateText }} {{ format(card.view_at * 1000, 'HH:mm') }}&lt;/span&gt;\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;span class=\"date\" v-else&gt;{{ format(card.view_at * 1000, 'MM-DD HH:mm') }}&lt;/span&gt;\n&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;\n&nbsp; &nbsp; &nbsp; &nbsp; &lt;!-- up 姓名 --&gt;\n&nbsp; &nbsp; &nbsp; &nbsp; &lt;span v-if=\"card.name\" class=\"up\"&gt;{{ card.name }}&lt;/span&gt;\n&nbsp; &nbsp; &nbsp; &lt;/div&gt;\n&nbsp; &nbsp; &lt;/div&gt;\n&nbsp;&nbsp;\n&nbsp; &lt;/a&gt;\n&lt;/template&gt;\n\n\n&lt;script&gt;\nimport { format } from 'date-fns'\nimport NavUserVideoCardImg from './NavUserVideoCardImg'\n\n\nexport default {\n&nbsp; name: 'NavUserVideoCard',\n&nbsp; components: {\n&nbsp; &nbsp; NavUserVideoCardImg,\n&nbsp; },\n&nbsp; props: {\n&nbsp; &nbsp; dateText: {\n&nbsp; &nbsp; &nbsp; type: String,\n&nbsp; &nbsp; &nbsp; default: null,\n&nbsp; &nbsp; },\n&nbsp; &nbsp; from: {\n&nbsp; &nbsp; &nbsp; type: String,\n&nbsp; &nbsp; &nbsp; default: null,\n&nbsp; &nbsp; },\n&nbsp; &nbsp; card: {\n&nbsp; &nbsp; &nbsp; type: Object,\n&nbsp; &nbsp; &nbsp; default: null,\n&nbsp; &nbsp; },\n&nbsp; },\n&nbsp; data() {\n&nbsp; &nbsp; return {\n&nbsp; &nbsp; &nbsp; format,\n&nbsp; &nbsp; }\n&nbsp; },\n&nbsp; computed: {\n&nbsp; &nbsp; historyDevice() {\n&nbsp; &nbsp; &nbsp; if(this.from === 'HISTORY') {\n&nbsp; &nbsp; &nbsp; &nbsp; const device = this.card.device\n&nbsp; &nbsp; &nbsp; &nbsp; const deviceMap = {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2: 'bili-PC',\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1: 'bili-Mobile',\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3: 'bili-Mobile',\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5: 'bili-Mobile',\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7: 'bili-Mobile',\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4: 'bili-iPad',\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6: 'bili-iPad',\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 33: 'bili-TV'\n&nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; &nbsp; &nbsp; return deviceMap[device] || ''\n&nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; }\n&nbsp; },\n&nbsp; methods: {\n&nbsp; &nbsp; linkMap() {\n&nbsp; &nbsp; &nbsp; const { business: type, id, bvid, pgcUri, progress, page, cid } = this.card\n&nbsp; &nbsp; &nbsp; // progress -&gt; 观看到第 xx 秒\n&nbsp; &nbsp; &nbsp; // page -&gt; 第几p\n&nbsp; &nbsp; &nbsp; switch (type) {\n&nbsp; &nbsp; &nbsp; &nbsp; case 'live':\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return `//live.bilibili.com/${id}`\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;\n&nbsp; &nbsp; &nbsp; &nbsp; case 'pgc':\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return `${pgcUri}${progress &gt; 0 ? `?t=${progress}` : ''}`\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;\n&nbsp; &nbsp; &nbsp; &nbsp; case 'cheese':\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return `${pgcUri}${progress &gt; 0 ? `?t=${progress}` : ''}`\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;\n&nbsp; &nbsp; &nbsp; &nbsp; case 'archive':\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const query = {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; t: progress &gt; 1 ? progress : '',\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; p: page &gt; 1 ? page : '',\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const queryString = this.objToQuerystring(query)\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return `//www.bilibili.com/video/${bvid}${this.from === 'FAVORITE' ? '' : queryString}`\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;\n&nbsp; &nbsp; &nbsp; &nbsp; case 'article':\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return `//www.bilibili.com/read/cv${id}`\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;\n&nbsp; &nbsp; &nbsp; &nbsp; case 'article-list':\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return `//www.bilibili.com/read/cv${cid}`\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;\n&nbsp; &nbsp; &nbsp; &nbsp; case 'audio':\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return `//www.bilibili.com/audio/au${id}`\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;\n&nbsp; &nbsp; &nbsp; &nbsp; default:\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;\n&nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; },\n&nbsp; &nbsp; objToQuerystring(obj) {\n&nbsp; &nbsp; &nbsp; let query = ''\n&nbsp; &nbsp; &nbsp; for(let key in obj) {\n&nbsp; &nbsp; &nbsp; &nbsp; if(obj[key]) {\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; query += `&amp;${key}=${obj[key]}`\n&nbsp; &nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; &nbsp; return query.replace('&amp;', '?')\n&nbsp; &nbsp; },\n&nbsp; },\n}\n&lt;/script&gt;\n\n\n&lt;style lang=\"less\" scoped&gt;\n.mutil-ellipsis (@line-count) {\n&nbsp; display: -webkit-box;\n&nbsp; overflow: hidden;\n&nbsp; /*! autoprefixer: ignore next */\n&nbsp; -webkit-box-orient: vertical;\n&nbsp; text-overflow: -o-ellipsis-lastline;\n&nbsp; text-overflow: ellipsis;\n&nbsp; word-break: break-all;\n\n\n&nbsp; -webkit-line-clamp: @line-count;\n}\n\n\n.header-video-card {\n&nbsp; display: flex;\n&nbsp; flex-shrink: 0;\n&nbsp; padding: 8px 5px 8px 20px;\n&nbsp; height: 77px;\n&nbsp; cursor: pointer;\n&nbsp; transition: .3s ease;\n\n\n&nbsp; &amp;:hover {\n&nbsp; &nbsp; background-color: #F4F4F4;\n&nbsp; }\n\n\n&nbsp; .video-preview {\n&nbsp; &nbsp; position: relative;\n&nbsp; &nbsp; text-align: center;\n&nbsp; }\n\n\n&nbsp; .multiple-preview {\n&nbsp; &nbsp; width: 108px;\n&nbsp; &nbsp; height: 61px;\n&nbsp; }\n\n\n&nbsp; .badge {\n&nbsp; &nbsp; position: absolute;\n&nbsp; &nbsp; top: 4px;\n&nbsp; &nbsp; right: 4px;\n&nbsp; &nbsp; padding: 0 3px;\n&nbsp; &nbsp; height: 16px;\n&nbsp; &nbsp; line-height: 16px;\n&nbsp; &nbsp; border-radius: 1px;\n&nbsp; &nbsp; color: #ffffff;\n&nbsp; &nbsp; text-align: center;\n&nbsp; &nbsp; font-size: 12px;\n&nbsp; }\n\n\n&nbsp; .badge-red {\n&nbsp; &nbsp; background: #FB7299;\n&nbsp; }\n\n\n&nbsp; .badge-gray {\n&nbsp; &nbsp; background: rgba(0, 0, 0, 0.5)\n&nbsp; }\n\n\n&nbsp; .bar {\n&nbsp; &nbsp; position: absolute;\n&nbsp; &nbsp; bottom: 0;\n&nbsp; &nbsp; left: 0;\n&nbsp; &nbsp; width: 100%;\n&nbsp; &nbsp; height: 3px;\n&nbsp; &nbsp; border-radius: 0 0 2px 2px;\n&nbsp; &nbsp; background: #757575;\n&nbsp; }\n\n\n&nbsp; .progress {\n&nbsp; &nbsp; position: absolute;\n&nbsp; &nbsp; bottom: 0;\n&nbsp; &nbsp; left: 0;\n&nbsp; &nbsp; max-width: 100%;\n&nbsp; &nbsp; height: 3px;\n&nbsp; &nbsp; border-radius: 0 0 2px 2px;\n&nbsp; &nbsp; background: #FB7299;\n&nbsp; }\n\n\n&nbsp; .video-info {\n&nbsp; &nbsp; display: flex;\n&nbsp; &nbsp; flex-direction: column;\n&nbsp; &nbsp; flex-shrink: 0;\n&nbsp; &nbsp; justify-content: space-between;\n&nbsp; &nbsp; margin-left: 12px;\n\n\n&nbsp; &nbsp; .line-2 {\n&nbsp; &nbsp; &nbsp; max-width: 210px;\n&nbsp; &nbsp; &nbsp; height: 37px;\n&nbsp; &nbsp; &nbsp; color: #212121;\n&nbsp; &nbsp; &nbsp; font-weight: 500;\n&nbsp; &nbsp; &nbsp; font-size: 14px;\n\n\n&nbsp; &nbsp; &nbsp; .mutil-ellipsis(2);\n&nbsp; &nbsp; }\n\n\n\n\n&nbsp; &nbsp; .bilifont {\n&nbsp; &nbsp; &nbsp; color: #999;\n&nbsp; &nbsp; &nbsp; vertical-align: middle;\n&nbsp; &nbsp; }\n\n\n&nbsp; &nbsp; .line-1 {\n&nbsp; &nbsp; &nbsp; overflow: hidden;\n&nbsp; &nbsp; &nbsp; margin-right: 15px;\n&nbsp; &nbsp; &nbsp; max-width: 210px;\n&nbsp; &nbsp; &nbsp; text-overflow: ellipsis;\n&nbsp; &nbsp; &nbsp; white-space: nowrap;\n&nbsp; &nbsp; &nbsp; font-weight: 500;\n&nbsp; &nbsp; &nbsp; color: #212121;\n&nbsp; &nbsp; }\n\n\n&nbsp; &nbsp; .desc {\n&nbsp; &nbsp; &nbsp; overflow: hidden;\n&nbsp; &nbsp; &nbsp; max-width: 210px;\n&nbsp; &nbsp; &nbsp; color: #505050;\n&nbsp; &nbsp; &nbsp; text-overflow: ellipsis;\n&nbsp; &nbsp; &nbsp; white-space: nowrap;\n&nbsp; &nbsp; &nbsp; font-size: 12px;\n&nbsp; &nbsp; }\n\n\n&nbsp; &nbsp; .info {\n&nbsp; &nbsp; &nbsp; display: flex;\n&nbsp; &nbsp; &nbsp; color: #999999;\n&nbsp; &nbsp; &nbsp; font-size: 12px;\n\n\n&nbsp; &nbsp; &nbsp; .history-device {\n&nbsp; &nbsp; &nbsp; &nbsp; margin-right: 2px;\n&nbsp; &nbsp; &nbsp; }\n\n\n&nbsp; &nbsp; &nbsp; &amp;--history {\n&nbsp; &nbsp; &nbsp; &nbsp; margin-right: 16px;\n&nbsp; &nbsp; &nbsp; }\n&nbsp; &nbsp; }\n\n\n&nbsp; &nbsp; .up {\n&nbsp; &nbsp; &nbsp; overflow: hidden;\n&nbsp; &nbsp; &nbsp; margin-right: 15px;\n&nbsp; &nbsp; &nbsp; max-width: 110px;\n&nbsp; &nbsp; &nbsp; text-overflow: ellipsis;\n&nbsp; &nbsp; &nbsp; white-space: nowrap;\n&nbsp; &nbsp; }\n&nbsp; }\n}\n\n\n&lt;/style&gt;\n\n\n</pre> ","floor":2,"pid":8867,"postTime":"2021-04-13 23:49:10","replyCount":0,"signKey":"","source":"","tid":3137},{"author":"孙天骁","authorCode":"admin","content":"<p><img src=\"/xbar/1ce77683a53b0fd52f.jpg\"></p> ","floor":3,"pid":8868,"postTime":"2021-04-13 23:54:41","replyCount":0,"signKey":"","source":"","tid":3137}],"pageInfo":{"total":3,"pageSize":30,"current":1},"threadInfo":{"author":"孙天骁","authorCode":"admin","classifyName":"闲谈","goodClassifyName":"","id":3137,"isGood":false,"isPicture":true,"isRepost":false,"postTime":"2021-04-13 23:48:54","replyCount":2,"title":"B站视频卡片源码……","topState":0},"tid":3137,"total":3,"totalPages":1,"viewHost":false,"users":{"admin":{"exists":true,"name":"孙天骁","code":"admin","alias":"stx","description":"一个内心丰富的人","homepageUrl":"/u/stx","group":5,"groupName":"站长","isLocked":false,"gender":1,"avatarUrl":"/s/user/FufL-vSFO5eM1we1mxdfYHKH9tfK.jpg","realName":"孙天骁","refBaike":"","isManager":true,"isMe":true,"isLover":false,"introduction":"","joinTime":"2015-02-11 21:45:00"}},"needVerify":true}}