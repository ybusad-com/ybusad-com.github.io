"use strict";(self.webpackChunksplendor_pc=self.webpackChunksplendor_pc||[]).push([[379],{56656:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.scrollToError=t.useFormErrors=void 0;var r=n(49963);t.useFormErrors=function(){var e=(0,r.reactive)(new Map);return{errors:e,wrapperValidate:function(t){return function(n){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];try{n.apply(this,r),e.delete(t)}catch(n){e.set(t,n)}}}}}},t.scrollToError=function(){(0,r.nextTick)((function(){var e;null===(e=document.querySelector(".has-error"))||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center"})}))}},15319:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getData=void 0;var o=r(n(6974));t.getData=function(){return(0,o.default)("GET","/article/selector/getData.json")}},36459:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getData=void 0;var o=r(n(6974));t.getData=function(e){return(0,o.default)("GET","/baike/selector/getData.json",e)}},37535:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.postAddKeyword=t.postEditKeyword=t.postDeleteKeyword=t.getKeywordListByIndexID=void 0;var o=r(n(6974));t.getKeywordListByIndexID=function(e){return(0,o.default)("GET","/baike/keyword/edit/getKeywordListByIndexID.json",e)},t.postDeleteKeyword=function(e){return(0,o.default)("POST","/baike/keyword/edit/postDeleteKeyword.json",e)},t.postEditKeyword=function(e){return(0,o.default)("POST","/baike/keyword/edit/postEditKeyword.json",e)},t.postAddKeyword=function(e){return(0,o.default)("POST","/baike/keyword/edit/postAddKeyword.json",e)}},95056:(e,t,n)=>{t.t=void 0;var r=n(56656);t.t=function(){var e=(0,r.useFormErrors)(),t=e.errors,n=e.wrapperValidate,o=n("word")((function(e){if(""===e.trim())throw"请填写关键词";if(e.trim().length<=1)throw"关键词至少2个字"}));return{errors:t,validateRegex:n("regex")((function(e){if(!e.trim())throw"请填写正则表达式"})),validateWord:o}}},37107:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.postAddEntry=t.postDeleteEntry=t.getEntryListByIndexID=void 0;var o=r(n(6974));t.getEntryListByIndexID=function(e){return(0,o.default)("GET","/baike/entry/edit/getEntryListByIndexID.json",e)},t.postDeleteEntry=function(e){return(0,o.default)("POST","/baike/entry/edit/postDeleteEntry.json",e)},t.postAddEntry=function(e){return(0,o.default)("POST","/baike/entry/edit/postAddEntry.json",e)}},79339:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.postBindRelatedArticles=t.getRelatedArticlesByIndexID=void 0;var o=r(n(6974));t.getRelatedArticlesByIndexID=function(e){return(0,o.default)("GET","/baike/bind/getRelatedArticlesByIndexID.json",e)},t.postBindRelatedArticles=function(e){return(0,o.default)("POST","/baike/bind/postBindRelatedArticles.json",e)}},64074:(e,t,n)=>{n.d(t,{Z:()=>y});var r=n(66252),o=n(2262),i=n(81181),l=n(78174),a=n(89090),u=n(23279),c=n.n(u),d=n(36459);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const y=(0,r.aZ)({name:"BaikeSelector",props:{modelValue:Boolean,selected:{type:Array,default:[]},onConfirm:Function},setup:function(e,t){var n=t.emit,u=(0,o.reactive)({showDialog:e.modelValue||!1,keyWords:"",loading:!1,list:[],selected:m(e.selected||[])});(0,r.YP)((function(){return e.selected}),(function(e){u.selected=m(e)})),(0,r.YP)((function(){return u.showDialog}),(function(e){n("update:modelValue",e),e&&(u.keyWords="")})),(0,r.YP)((function(){return e.modelValue}),(function(e){u.showDialog=e}));var p=function(){var t;u.showDialog=!1,null===(t=e.onConfirm)||void 0===t||t.call(e,u.selected)};return(0,r.YP)((function(){return u.keyWords}),c()((function(e){u.loading=!0,(0,d.getData)({keyWords:e,pageSize:6}).then((function(e){u.list=e.list})).catch((function(e){i.Notify.error(e)})).finally((function(){u.loading=!1}))}),500),{immediate:!0}),function(){return(0,r.Wm)(i.Dialog,{title:"选择百科词条",modelValue:u.showDialog,"onUpdate:modelValue":function(e){return u.showDialog=e}},{default:function(){return[(0,r.Wm)("div",{class:"search--JuTcO"},[(0,r.Wm)(i.Input,{modelValue:u.keyWords,"onUpdate:modelValue":function(e){return u.keyWords=e},block:!0,placeholder:"输入关键字搜索…",autofocus:!0},null)]),(0,r.Wm)(i.Loading,{show:u.loading},{default:function(){return[(0,r.Wm)("div",{class:"list--+o9Md"},[0===u.list.length&&(0,r.Wm)("div",{class:"emptyTip--Du0Tr"},[(0,r.Wm)("span",null,[(0,r.Uk)("暂无结果")])]),u.list.map((function(e){return(0,r.Wm)("div",{key:e.indexID,class:"item--UX3Q0"},[(0,r.Wm)("div",{class:"checkbox--cKLv2"},[(0,r.Wm)(i.Checkbox,{modelValue:u.selected.some((function(t){return t.indexID===e.indexID})),disabled:!u.selected.some((function(t){return t.indexID===e.indexID}))&&u.selected.length>10,onChange:function(t){if(t.target.checked)u.selected.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e));else{var n=u.selected.findIndex((function(t){return t.indexID===e.indexID}));n>=0&&u.selected.splice(n,1)}}},null)]),(0,r.Wm)("div",{class:"content--0Nr7P"},[(0,r.Wm)("div",{class:"title--NwiXt"},[(0,a.HW)(e.displayName,e.name)]),(0,r.Wm)("div",{class:"info--fAhLP"},[(0,r.Wm)("span",{class:"summary--sQSHm"},[e.summary]),(0,r.Wm)("span",{class:"more--NlHIr"},[(0,r.Wm)(l.default,{href:e.url},{default:function(){return[(0,r.Uk)("查看百科>")]}})])])])])}))])]}}),(0,r.Wm)("div",{class:"footer--tUsz7"},[(0,r.Wm)("span",{class:"count---oELW"},[(0,r.Uk)("已选 "),u.selected.length,(0,r.Uk)(" 项"),u.selected.length>=10&&"，已达上限"]),(0,r.Wm)(i.Button,{icon:"ok",type:"primary",onClick:p},{default:function(){return[(0,r.Uk)("确定")]}})])]}})}}})},82298:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(66252),o=n(2262),i=n(81181),l=n(56656),a=n(73159),u=n(37535),c=n(95056);const d=(0,r.aZ)({name:"KeyWordEditor",props:{indexID:{type:Number,required:!0},defaultAutoDetect:{type:Boolean,default:!0}},setup:function(e){var t=(0,o.reactive)({showDialog:!1,list:[],loading:!1,isBusy:!1,isAdd:!0}),n=(0,o.reactive)({keyWord:"",useRegex:!1,regex:"",autoDetect:e.defaultAutoDetect,id:0}),d=(0,c.t)(),s=d.errors,f=d.validateRegex,m=d.validateWord,p=[{title:"关键词",name:"word"},{title:"正则匹配",render:function(e){return e.matchRegex?(0,r.Wm)("span",{class:"regex--amR+7"},[(0,r.Uk)("/"),e.matchRegex,(0,r.Uk)("/")]):"-"}},{title:"自动注入",width:90,align:"center",render:function(e){return e.autoDetect?"是":"否"}},{title:"操作",align:"center",width:120,render:function(o,l){var a=l.row;return(0,r.Wm)(r.HY,null,[(0,r.Wm)(i.Button,{size:"small",type:"info",style:{marginRight:"8px"},onClick:function(){!function(e){n.keyWord=e.word,n.useRegex=!!e.matchRegex,n.regex=e.matchRegex,n.autoDetect=e.autoDetect,n.id=e.id,t.isAdd=!1,t.showDialog=!0}(o)}},{default:function(){return[(0,r.Uk)("编辑")]}}),(0,r.Wm)(i.Popover,{trigger:"click",style:{width:"200px"}},{default:function(){return[(0,r.Wm)(i.Button,{size:"small",type:"danger"},{default:function(){return[(0,r.Uk)("删除")]}})]},content:function(){return(0,r.Wm)("div",null,[(0,r.Wm)("p",null,[(0,r.Uk)("确认删除这个关键词？")]),(0,r.Wm)("div",null,[(0,r.Wm)(i.Button,{size:"small",onClick:function(){document.body.click()}},{default:function(){return[(0,r.Uk)("取消")]}}),(0,r.Wm)(i.Button,{size:"small",type:"danger",style:{marginLeft:"8px"},onClick:function(){(0,u.postDeleteKeyword)({indexID:e.indexID,keywordID:o.id}).then((function(){t.list.splice(a,1)})).catch((function(e){i.Notify.error(e)})),document.body.click()}},{default:function(){return[(0,r.Uk)("删除")]}})])])}})])}}],y=function(){if(m(n.keyWord),n.useRegex?f(n.regex):s.delete("regex"),s.size>0)(0,l.scrollToError)();else{if(!t.isAdd)return t.isBusy=!0,void(0,u.postEditKeyword)({id:n.id,matchRegex:n.useRegex?n.regex:"",autoDetect:n.autoDetect,indexID:e.indexID}).then((function(e){var n=t.list.find((function(t){return t.id===e.id}));n&&(n.autoDetect=e.autoDetect,n.matchRegex=e.matchRegex),t.showDialog=!1})).catch((function(e){i.Notify.error(e)})).finally((function(){t.isBusy=!1}));t.isBusy=!0,(0,u.postAddKeyword)({indexID:e.indexID,word:n.keyWord,matchRegex:n.useRegex?n.regex:"",autoDetect:n.autoDetect}).then((function(e){t.list.push({id:e.id,word:e.word,matchRegex:e.matchRegex,autoDetect:e.autoDetect}),t.showDialog=!1})).catch((function(e){i.Notify.error(e)})).finally((function(){t.isBusy=!1}))}};return(0,r.YP)((function(){return e.indexID}),(function(n){t.loading=!0,(0,u.getKeywordListByIndexID)({indexID:n}).then((function(r){n===e.indexID&&(t.list=r.list)})).catch((function(e){i.Notify.error(e)})).finally((function(){t.loading=!1}))}),{immediate:!0}),function(){return(0,r.Wm)("div",{class:"editor--jQd75"},[(0,r.Wm)("div",null,[(0,r.Wm)(i.Button,{size:"small",onClick:function(){n.autoDetect=e.defaultAutoDetect,n.regex="",n.keyWord="",n.useRegex=!1,t.isAdd=!0,t.showDialog=!0}},{default:function(){return[(0,r.Uk)("+ 添加关键词")]}})]),(0,r.Wm)(i.Table,{columns:p,data:t.list,bordered:!0,loading:t.loading,emptyText:"没有关联的关键词"},null),(0,r.Wm)(i.Dialog,{title:t.isAdd?"新建关键词":"编辑关键词",modelValue:t.showDialog,"onUpdate:modelValue":function(e){return t.showDialog=e}},{default:function(){return[(0,r.Wm)(a.Z,{label:"关键词：",errorDesc:s.get("word")},{default:function(){return[(0,r.Wm)(i.Input,{disabled:!t.isAdd,modelValue:n.keyWord,"onUpdate:modelValue":function(e){return n.keyWord=e},placeholder:"32字之内",onValidate:m,maxlength:32,block:!0},null)]}}),(0,r.Wm)(a.Z,null,{default:function(){return[(0,r.Wm)(i.Checkbox,{modelValue:n.useRegex,"onUpdate:modelValue":function(e){return n.useRegex=e},disabled:!0},{default:function(){return[(0,r.Uk)("启用正则匹配（暂未开放）")]}})]}}),n.useRegex&&(0,r.Wm)(a.Z,{label:"正则表达式：",errorDesc:s.get("regex")},{default:function(){return[(0,r.Wm)(i.Input,{modelValue:n.regex,"onUpdate:modelValue":function(e){return n.regex=e},placeholder:"小土(?!豆)",onValidate:f,maxlength:64,block:!0},null)]}}),(0,r.Wm)(a.Z,{label:"开启随记内检测：",row:!0},{default:function(){return[(0,r.Wm)(i.Switch,{modelValue:n.autoDetect,"onUpdate:modelValue":function(e){return n.autoDetect=e}},null)]}}),(0,r.Wm)("div",{class:"footer--hlYma"},[(0,r.Wm)(i.Button,{type:"primary",onClick:y,loading:t.isBusy},{default:function(){return[(0,r.Uk)("确认")]}})])]}})])}}})},39465:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(66252),o=n(2262),i=n(81181),l=n(12861),a=n(73159),u=n(37107);const c=(0,r.aZ)({name:"LinkEditor",props:{indexID:{type:Number,required:!0}},setup:function(e,t){var n=t.expose,c=(0,o.reactive)({showDialog:!1,linkText:"",list:[],loading:!1,isBusy:!1});n({openPage:function(){if(c.list.length>0){var t=c.list.map((function(e){return e.link})).sort((function(e,t){return e.length-t.length}))[0];l.router.push("/baike/".concat(t))}else l.router.push("/baike/".concat(e.indexID))}}),(0,r.YP)((function(){return e.indexID}),(function(e){c.loading=!0,(0,u.getEntryListByIndexID)({indexID:e}).then((function(t){t.indexID===e&&(c.list=t.list)})).catch((function(e){i.Notify.error(e)})).finally((function(){c.loading=!1}))}),{immediate:!0});var d=[{title:"链接（Link）",name:"link",render:function(e){return(0,r.Wm)("span",{class:"linkView--GJCm+"},[(0,r.Uk)("https://www.ybusad.com/baike/"),(0,r.Wm)("strong",null,[e.link])])}},{title:"操作",width:80,align:"center",render:function(t){return(0,r.Wm)(i.Popover,{trigger:"click",style:{width:"220px"}},{default:function(){return[(0,r.Wm)(i.Button,{size:"small",type:"danger"},{default:function(){return[(0,r.Uk)("删除")]}})]},content:function(){return(0,r.Wm)("div",null,[(0,r.Wm)("p",null,[(0,r.Uk)("确认删除这个链接？可能会导致现有的百科链接无法访问。")]),(0,r.Wm)("div",null,[(0,r.Wm)(i.Button,{size:"small",onClick:function(){document.body.click()}},{default:function(){return[(0,r.Uk)("取消")]}}),(0,r.Wm)(i.Button,{size:"small",type:"danger",style:{marginLeft:"8px"},onClick:function(){var n;n=t.id,(0,u.postDeleteEntry)({indexID:e.indexID,entryID:n}).then((function(){c.list=c.list.filter((function(e){return e.id!==n}))})).catch((function(e){i.Notify.error(e)})),document.body.click()}},{default:function(){return[(0,r.Uk)("删除")]}})])])}})}}],s=function(){!1!==/[a-z]+/.test(c.linkText)?(c.isBusy=!0,(0,u.postAddEntry)({indexID:e.indexID,link:c.linkText}).then((function(e){c.list.push(e),c.showDialog=!1})).catch((function(e){i.Notify.error(e)})).finally((function(){c.isBusy=!1}))):i.Notify.info("请输入以小写字母组成的链接")};return function(){return(0,r.Wm)("div",{class:"editor--XPGz-"},[(0,r.Wm)("div",null,[(0,r.Wm)(i.Button,{size:"small",loading:c.loading,onClick:function(){c.linkText="",c.showDialog=!0}},{default:function(){return[(0,r.Uk)("+ 添加入口链接")]}})]),(0,r.Wm)(i.Table,{style:{width:"520px"},emptyText:"没有关联的链接",loading:c.loading,columns:d,data:c.list,bordered:!0},null),(0,r.Wm)(i.Dialog,{title:"新建入口链接",modelValue:c.showDialog,"onUpdate:modelValue":function(e){return c.showDialog=e}},{default:function(){return[(0,r.Wm)(a.Z,{label:"链接："},{default:function(){return[(0,r.Wm)(i.Input,{modelValue:c.linkText,"onUpdate:modelValue":function(e){return c.linkText=e},onPressEnter:s,maxlength:32,autofocus:!0,block:!0},{prepend:function(){return"https://www.ybusad.com/baike/"}})]}}),(0,r.Wm)("div",{class:"footer--lPaFH"},[(0,r.Wm)(i.Button,{type:"primary",onClick:s,loading:c.isBusy},{default:function(){return[(0,r.Uk)("确认")]}})])]}})])}}})},56132:(e,t,n)=>{n.d(t,{Z:()=>f});var r=n(66252),o=n(2262),i=n(81181),l=n(78174),a=n(79339),u=n(15319);const c={search:"search---p7mo",emptyTip:"emptyTip--TGTKd",list:"list--kz4wm",item:"item--ERSzF",checkbox:"checkbox--iGT8H",content:"content--I5MH2",title:"title--KKxaK",info:"info--qx9fW",footer:"footer--weG6u",count:"count--KH4YJ"};function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const s=(0,r.aZ)({name:"ArticleSelector",props:{modelValue:Boolean,selected:{type:Array,default:[]},onConfirm:Function},setup:function(e,t){var n=t.emit,a=(0,o.reactive)({showDialog:e.modelValue||!1,keyWord:"",list:[],selected:[]}),s=(0,o.reactive)({list:(0,r.Fl)((function(){var e=a.keyWord.split(" ").filter(Boolean).map((function(e){return e.toLowerCase()}));return 0===e.length?a.list.slice(0,6):a.list.filter((function(t){return e.every((function(e){return t.title.toLowerCase().includes(e)}))})).slice(0,6)}))});(0,r.YP)((function(){return a.showDialog}),(function(t){var r;n("update:modelValue",t),t&&(a.keyWord="",a.selected=function(e){if(Array.isArray(e))return d(e)}(r=e.selected)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),(0,u.getData)().then((function(e){a.list=e.list})).catch((function(e){i.Notify.error(e)})))}),{immediate:!0}),(0,r.YP)((function(){return e.modelValue}),(function(e){a.showDialog=e}));var f=function(){var t;a.showDialog=!1,null===(t=e.onConfirm)||void 0===t||t.call(e,a.selected)};return function(){return(0,r.Wm)(i.Dialog,{title:"选择文章",modelValue:a.showDialog,"onUpdate:modelValue":function(e){return a.showDialog=e}},{default:function(){return[(0,r.Wm)("div",{class:c.search},[(0,r.Wm)(i.Input,{modelValue:a.keyWord,"onUpdate:modelValue":function(e){return a.keyWord=e},block:!0,placeholder:"输入关键字进行匹配查找…",autofocus:!0},null)]),(0,r.Wm)("div",{class:c.list},[0===s.list.length&&(0,r.Wm)("div",{class:c.emptyTip},[(0,r.Wm)("span",null,[(0,r.Uk)("暂无结果")])]),s.list.map((function(e){return(0,r.Wm)("div",{key:e.id,class:c.item},[(0,r.Wm)("div",{class:c.checkbox},[(0,r.Wm)(i.Checkbox,{modelValue:a.selected.includes(e.urlCode),disabled:!a.selected.includes(e.urlCode)&&a.selected.length>=10,onChange:function(t){if(t.target.checked)a.selected.push(e.urlCode);else{var n=a.selected.indexOf(e.urlCode);n>=0&&a.selected.splice(n,1)}}},null)]),(0,r.Wm)("div",{class:c.content},[(0,r.Wm)("div",{class:c.title},[e.title]),(0,r.Wm)("div",{class:c.info},[(0,r.Wm)("span",null,[(0,r.Wm)("span",{class:c.author},[e.author,(0,r.Uk)(" / "),e.createdAt])]),(0,r.Wm)("span",null,[(0,r.Wm)(l.default,{href:"/a/".concat(e.urlCode,".htm")},{default:function(){return[(0,r.Uk)("阅读全文>")]}})])])])])}))]),(0,r.Wm)("div",{class:c.footer},[(0,r.Wm)("span",{class:c.count},[(0,r.Uk)("已选 "),a.selected.length,(0,r.Uk)(" 项"),a.selected.length>=10&&"，已达上限"]),(0,r.Wm)(i.Button,{icon:"ok",type:"primary",onClick:f},{default:function(){return[(0,r.Uk)("确定")]}})])]}})}}}),f=(0,r.aZ)({name:"RelatedArticleEditor",props:{indexID:{type:Number,required:!0}},setup:function(e){var t=(0,o.reactive)({list:[],loading:!1,selected:[],showSelectorDialog:!1}),n=function(){t.loading=!0,(0,a.getRelatedArticlesByIndexID)({indexID:e.indexID}).then((function(n){n.indexID===e.indexID&&(t.list=n.list,t.selected=n.list.map((function(e){return e.urlCode})))})).catch((function(e){i.Notify.error(e)})).finally((function(){t.loading=!1}))};(0,r.YP)((function(){return e.indexID}),n,{immediate:!0});var u=[{title:"文章标题",render:function(e){return(0,r.Wm)(l.default,{href:"/a/".concat(e.urlCode,".htm")},{default:function(){return[e.title]}})}},{title:"作者",name:"author",align:"center"},{title:"操作",width:80,align:"center",render:function(o){return(0,r.Wm)(i.Popover,{trigger:"click",style:{width:"200px"}},{default:function(){return[(0,r.Wm)(i.Button,{size:"small",type:"danger"},{default:function(){return[(0,r.Uk)("删除")]}})]},content:function(){return(0,r.Wm)("div",null,[(0,r.Wm)("p",null,[(0,r.Uk)("确认取消关联这篇文章？")]),(0,r.Wm)("div",null,[(0,r.Wm)(i.Button,{size:"small",onClick:function(){document.body.click()}},{default:function(){return[(0,r.Uk)("取消")]}}),(0,r.Wm)(i.Button,{size:"small",type:"danger",style:{marginLeft:"8px"},onClick:function(){var r=t.selected.filter((function(e){return e!==o.urlCode}));(0,a.postBindRelatedArticles)({indexID:e.indexID,articleUrlCodeList:r}).then((function(){i.Notify.success("已删除"),n()})).catch((function(e){i.Notify.error(e)})),document.body.click()}},{default:function(){return[(0,r.Uk)("删除")]}})])])}})}}];return function(){return(0,r.Wm)("div",{style:{marginTop:"4px"}},[(0,r.Wm)("div",null,[(0,r.Wm)(i.Button,{size:"small",icon:"thing",loading:t.loading,onClick:function(){t.showSelectorDialog=!0}},{default:function(){return[(0,r.Uk)("选择文章")]}})]),(0,r.Wm)(i.Table,{data:t.list,loading:t.loading,emptyText:"没有关联的文章",columns:u,bordered:!0},null),(0,r.Wm)(s,{modelValue:t.showSelectorDialog,"onUpdate:modelValue":function(e){return t.showSelectorDialog=e},selected:t.selected,onConfirm:function(r){t.selected=r,(0,a.postBindRelatedArticles)({indexID:e.indexID,articleUrlCodeList:r}).then((function(){i.Notify.success("已保存"),n()})).catch((function(e){i.Notify.error(e)}))}},null)])}}})},9881:(e,t,n)=>{n.d(t,{Z:()=>p});var r=n(66252),o=n(2262),i=n(81181),l=n(9980),a=n.n(l),u=n(18037),c=n(89090),d=n(50405),s=n(78174),f=n(64074);const m={list:"list--EIWkw",item:"item--TEG98",drag:"drag--lPMfU",baike:"baike--gqZw8",operate:"operate--ujqDy"},p=(0,r.aZ)({name:"RelatedEditor",props:{data:{type:Array,default:function(){return[]}}},setup:function(e,t){var n=t.emit,l=(0,o.reactive)({showSelector:!1,data:[]});return(0,r.YP)((function(){return e.data}),(function(e){l.data=e})),(0,r.YP)((function(){return l.data}),(function(e){n("update:data",e)})),function(){return(0,r.Wm)("div",null,[l.data.length>0&&(0,r.Wm)("div",{class:m.list},[(0,r.Wm)(a(),{"item-key":"id",list:l.data,handle:".handle"},{item:function(e){var t,n,o=e.element;return(0,r.Wm)("div",{key:o.indexID,class:m.item},[(0,r.Wm)("div",{class:m.drag},[(0,r.Wm)(i.Icon,{class:"handle",type:"menu"},null)]),(0,r.Wm)("div",{class:m.baike},[(0,r.Wm)(i.Avatar,{style:{marginRight:"8px"},inline:!0,shape:"circle",size:32,src:(0,u.fullfillImage)(o.avatarUrl,"!baike.thumb"),href:o.url},null),(0,r.Wm)(s.default,{href:o.url},(n=t=(0,c.HW)(o.displayName,o.name),"function"==typeof n||"[object Object]"===Object.prototype.toString.call(n)&&!(0,r.lA)(n)?t:{default:function(){return[t]}}))]),(0,r.Wm)("div",{class:m.operate},[(0,r.Wm)(s.default,{href:"/v2/baike/creator/".concat(d.EZ[o.type],"/editRelated/").concat(o.indexID),style:{marginRight:"8px"}},{default:function(){return[(0,r.Uk)("编辑条目")]}}),(0,r.Wm)("a",{onClick:function(){l.data=l.data.filter((function(e){return e.indexID!==o.indexID}))}},[(0,r.Uk)("删除")])])])}})]),(0,r.Wm)("div",{class:m.add},[(0,r.Wm)(i.Button,{type:"info",size:"small",onClick:function(){l.showSelector=!0}},{default:function(){return[(0,r.Uk)("+ 选择百科条目")]}})]),(0,r.Wm)(f.Z,{modelValue:l.showSelector,"onUpdate:modelValue":function(e){return l.showSelector=e},selected:l.data,onConfirm:function(e){l.data=e}},null)])}}})},76759:(e,t,n)=>{n.d(t,{Z:()=>h});var r=n(66252),o=n(2262),i=n(81181),l=n(9980),a=n.n(l),u=n(18037),c=n(89090),d=n(50405),s=n(78174),f=n(64074);const m={list:"list--Fc2IA",item:"item--g5pKM",drag:"drag--LbGJ8",baike:"baike--c5a2r",relation:"relation--s7N-G",input:"input--6mh6-",operate:"operate--S7xzD"};function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const h=(0,r.aZ)({name:"RelationEditor",props:{data:{type:Array,default:function(){return[]}}},setup:function(e,t){var n=t.emit,l=(0,o.reactive)({showSelector:!1,data:e.data});return(0,r.YP)((function(){return e.data}),(function(e){l.data=e})),(0,r.YP)((function(){return l.data}),(function(e){n("update:data",e)})),function(){return(0,r.Wm)("div",null,[l.data.length>0&&(0,r.Wm)("div",{class:m.list},[(0,r.Wm)(a(),{"item-key":"id",list:l.data,handle:".handle"},{item:function(e){var t,n,o=e.element;return(0,r.Wm)("div",{key:o.indexID,class:m.item},[(0,r.Wm)("div",{class:m.drag},[(0,r.Wm)(i.Icon,{class:"handle",type:"menu"},null)]),(0,r.Wm)("div",{class:m.baike},[(0,r.Wm)(i.Avatar,{style:{marginRight:"8px"},inline:!0,shape:"circle",size:32,src:(0,u.fullfillImage)(o.avatarUrl,"!baike.thumb"),href:o.url},null),(0,r.Wm)(s.default,{href:o.url},(n=t=(0,c.HW)(o.displayName,o.name),"function"==typeof n||"[object Object]"===Object.prototype.toString.call(n)&&!(0,r.lA)(n)?t:{default:function(){return[t]}}))]),(0,r.Wm)("div",{class:m.relation},[(0,r.Wm)("span",null,[(0,r.Uk)("关系：")]),(0,r.Wm)("div",{class:m.input},[(0,r.Wm)(i.Input,{modelValue:o.relation,"onUpdate:modelValue":function(e){return o.relation=e},block:!0,maxlength:24},null)])]),(0,r.Wm)("div",{class:m.operate},[(0,r.Wm)(s.default,{href:"/v2/baike/creator/".concat(d.EZ[o.type],"/editRelated/").concat(o.indexID),style:{marginRight:"8px"}},{default:function(){return[(0,r.Uk)("编辑条目")]}}),(0,r.Wm)("a",{onClick:function(){l.data=l.data.filter((function(e){return e.indexID!==o.indexID}))}},[(0,r.Uk)("删除")])])])}})]),(0,r.Wm)("div",{class:m.add},[(0,r.Wm)(i.Button,{type:"info",size:"small",onClick:function(){l.showSelector=!0}},{default:function(){return[(0,r.Uk)("+ 选择百科条目")]}})]),(0,r.Wm)(f.Z,{modelValue:l.showSelector,"onUpdate:modelValue":function(e){return l.showSelector=e},selected:e.data,onConfirm:function(e){l.data=e.map((function(e){var t,n=(null===(t=l.data.find((function(t){return t.indexID===e.indexID})))||void 0===t?void 0:t.relation)||"";return y(y({},e),{},{relation:n})}))}},null)])}}})},88006:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(66252),o=n(2262),i=n(81181);const l=(0,r.aZ)({name:"ViewGroupSelector",props:{modelValue:{type:Number,default:-1}},setup:function(e,t){var n=t.emit,l=(0,o.reactive)({value:e.modelValue});(0,r.YP)((function(){return e.modelValue}),(function(e){l.value=e})),(0,r.YP)((function(){return l.value}),(function(e){n("update:modelValue",e)}));var a=[{value:-1,text:"任何人可见"},{value:0,text:"登录可见"},{value:1,text:"认证用户可见"},{value:2,text:"实名用户可见"},{value:3,text:"高级用户可见"},{value:4,text:"管理员可见"},{value:5,text:"仅站长可见"}];return function(){return(0,r.Wm)(i.Select,{modelValue:l.value,"onUpdate:modelValue":function(e){return l.value=e},data:a},null)}}})}}]);
//# sourceMappingURL=379.33a28e.js.map